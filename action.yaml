name: "Neon Database Delete Branch"
author: "Neon Database"
description: "Deletes Neon Postgres branch with Id"
branding:
  icon: "box"
  color: "red"

inputs:
  project_id:
    required: true
    type: string
  branch_id:
    required: true
    type: string
  api_key:
    required: true

runs:
  using: "composite"
  steps:
    - uses: actions/setup-node@v3
    - run: yarn add global neonctl@v1.18.0
      shell: bash
    - name: Delete branch
      shell: bash
      env:
        NEON_API_KEY: ${{ inputs.api_key }}
      run: |
        yarn neonctl branches delete ${{ inputs.branch_id }} --project-id ${{ inputs.project_id }}
